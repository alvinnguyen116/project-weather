{"version":3,"sources":["api.js","weather/weather.js","app/App.js","index.js"],"names":["getJSON","url","a","fetch","res","json","UNIT","Object","freeze","FAHRENHEIT","CELSIUS","KELVIN","DailyWeather","icon","temp","weather","dt","active","handleClick","min","max","Math","round","length","iconURL","day","Date","getDay","substring","className","onClick","style","backgroundImage","Weather","isGoogleReady","isD3Ready","isSearchMode","address","setInputVal","inputVal","useState","currentLocation","setCurrentLocation","currentUnit","setCurrentUnit","currentWeather","setCurrentWeather","currentDay","setCurrentDay","svgRef","useRef","useEffect","hourly","d3","select","current","attr","units","lat","lon","API_KEY","getWeather","then","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","input","autocompleteService","google","maps","places","AutocompleteService","geoCoderService","Geocoder","getQueryPredictions","cb","predictions","status","PlacesServiceStatus","OK","description","geocode","location","geometry","lng","e","console","error","bind","getLocation","daily","humidity","rain","wind_speed","today","hours","getHours","todayString","title","split","slice","join","fspan","cspan","dailyCards","map","props","i","key","ref","App","script_url","history","useHistory","setIsGoogleReady","setIsD3Ready","isFocus","setIsFocus","setAddress","inputRef","onLoad","type","value","spellCheck","onChange","target","onKeyUp","keyCode","push","onFocus","onBlur","to","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8baccd3c.chunk.js","sourcesContent":["/**\r\n * @param url - the url to fetch\r\n * @returns {Promise<any>}\r\n * @desc A utility function for fetching the JSON\r\n * response from an endpoint.\r\n */\r\nasync function getJSON(url) {\r\n    try {\r\n        const res = await fetch(url);\r\n        return await res.json();\r\n    } catch (e) {\r\n        throw e;\r\n    }\r\n}\r\n\r\nexport const UNIT = Object.freeze({\r\n   FAHRENHEIT: \"imperial\",\r\n   CELSIUS: \"metric\",\r\n   KELVIN: \"kelvin\"\r\n});\r\n\r\nexport function getWeather({lat,lon}, units) {\r\n    const API_KEY = \"86ad87c076e4ca1d5d30d98e7ce72ced\";\r\n    if (units === UNIT.KELVIN) {\r\n        return getJSON(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&appid=${API_KEY}`);\r\n    }\r\n    return getJSON(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&units=${units}&appid=${API_KEY}`);\r\n}","import React, {useEffect, useState, useRef} from \"react\";\r\nimport {getWeather, UNIT} from \"../api\";\r\nimport './weather.scss';\r\n\r\n/**\r\n * @return {null}\r\n */\r\nfunction Weather({isGoogleReady, isD3Ready, isSearchMode, address, setInputVal, inputVal}) {\r\n\r\n    const [currentLocation, setCurrentLocation] = useState();\r\n    const [currentUnit, setCurrentUnit] = useState(UNIT.FAHRENHEIT);\r\n    const [currentWeather, setCurrentWeather] = useState(null);\r\n    const [currentDay, setCurrentDay] = useState(0);\r\n    const svgRef = useRef(null);\r\n\r\n    // SIDE EFFECTS ----------------------------------------------------------------------------------------------------\r\n\r\n    useEffect(() => {\r\n        /*global d3*/\r\n        if(isD3Ready && currentWeather && currentWeather.hourly && currentWeather.hourly.length) {\r\n            d3.select(svgRef.current).attr(\"width\", 400).attr(\"height\", 200);\r\n        }\r\n    }, [currentWeather]);\r\n\r\n    useEffect(() => {\r\n        if (currentLocation) {\r\n            getWeather(currentLocation, currentUnit).then(setCurrentWeather);\r\n        } else {\r\n            setCurrentWeather(null);\r\n        }\r\n    }, [currentLocation, currentUnit]);\r\n\r\n    useEffect(() => {\r\n        if (!isSearchMode) {\r\n            navigator.geolocation.getCurrentPosition(pos => {\r\n                const {latitude: lat, longitude: lon} = pos.coords;\r\n                setCurrentLocation({lat, lon});\r\n                setInputVal(`${lat},${lon}`);\r\n            });\r\n        }\r\n    }, [isSearchMode]);\r\n\r\n    useEffect(() => {\r\n        if (isSearchMode && isGoogleReady && address) {\r\n            getLocation(address);\r\n        } else {\r\n            setCurrentLocation(null);\r\n        }\r\n    }, [address]);\r\n\r\n    // METHODS -----------------------------------------------------------------------------------------------------------\r\n\r\n    function getLocation(input) {\r\n        /*global google*/\r\n        if (!isGoogleReady) return;\r\n        const autocompleteService = new google.maps.places.AutocompleteService();\r\n        const geoCoderService = new google.maps.Geocoder();\r\n        const getLocationCB = (cb, predictions, status) => {\r\n            if (status !== google.maps.places.PlacesServiceStatus.OK) {\r\n                console.error(status);\r\n                return;\r\n            }\r\n            try {\r\n                const {description: address} = predictions[0];\r\n                geoCoderService.geocode({address}, (res) => {\r\n                    if (res && res.length) {\r\n                        const {location} = res[0].geometry;\r\n                        cb({lat:location.lat(), lon: location.lng()});\r\n                        setInputVal(address);\r\n                    }\r\n                });\r\n            } catch (e) {\r\n                throw(e);\r\n            }\r\n        };\r\n        autocompleteService.getQueryPredictions({input}, getLocationCB.bind(null, setCurrentLocation));\r\n    }\r\n\r\n    if (currentWeather) {\r\n        const {current, daily} = currentWeather;\r\n        let {humidity, rain, dt, temp, wind_speed, weather} = current;\r\n        temp = Math.round(temp);\r\n        let description;\r\n        let icon;\r\n        if (weather && weather.length) {\r\n            description = weather[0].description;\r\n            icon = weather[0].icon;\r\n        }\r\n        const iconURL = `url(http://openweathermap.org/img/wn/${icon}@2x.png)`;\r\n        const today = new Date(dt*1000);\r\n        const weeks = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n        const hours = today.getHours();\r\n        const todayString = `${weeks[today.getDay()]} ${hours % 12 ? hours % 12 : 12}:00 ${hours > 11 ? 'PM' : 'AM'}`;\r\n        const title = inputVal.split(',').slice(1,3).join(',');\r\n\r\n        let fspan = <span>°F</span>;\r\n        let cspan = <span>°C</span>;\r\n        if (currentUnit === UNIT.FAHRENHEIT) {\r\n            cspan = <div className={\"link\"} onClick={() => setCurrentUnit(UNIT.CELSIUS)}>{cspan}</div>;\r\n        } else {\r\n            fspan = <div className={\"link\"} onClick={() => setCurrentUnit(UNIT.FAHRENHEIT)}>{fspan}</div>;\r\n        }\r\n\r\n        const dailyCards = daily.map((props,i) =>\r\n            <DailyWeather {...props} key={props.dt} active={currentDay === i} handleClick={() => setCurrentDay(i)}/>\r\n        );\r\n\r\n        return (\r\n            <div className={'weather'}>\r\n                <div className={'current'}>\r\n                    <div className={\"top\"}>\r\n                        <div className={\"title\"}>{isSearchMode ? title : ''}</div>\r\n                        <div className={\"time\"}>{todayString}</div>\r\n                        {description ? (<div className={\"description\"}>{description}</div>) : null}\r\n                    </div>\r\n                    <div className={\"middle\"}>\r\n                        <div className={\"temp-container\"}>\r\n                            {icon ? <div className={\"image\"} style={{backgroundImage:iconURL}}/> : null}\r\n                            <div className={\"temp\"}>{temp}</div>\r\n                            <div className={\"temp-options\"}>\r\n                                {fspan} &nbsp; | &nbsp; {cspan}\r\n                            </div>\r\n                        </div>\r\n                        <div className={\"right\"}>\r\n                            <div className={\"precipitation\"}>Precipitation: {`${rain ? rain : 0}%`}</div>\r\n                            <div className={\"humidity\"}>Humidity: {`${humidity}%`}</div>\r\n                            <div className={\"wind\"}>Wind: {`${wind_speed} mph`}</div>\r\n                            <div className={\"buttons\"}>\r\n                                <button>Temperature</button>\r\n                                <button>Precipitation</button>\r\n                                <button>Wind</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <svg ref={svgRef}/>\r\n                    <div className={\"bottom\"}>\r\n                        {dailyCards}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction DailyWeather({temp,weather,dt, active, handleClick}) {\r\n    let {min,max} = temp;\r\n    min = Math.round(min);\r\n    max = Math.round(max);\r\n    let icon;\r\n    if (weather && weather.length) {\r\n        icon = weather[0].icon;\r\n    }\r\n    const iconURL = `url(http://openweathermap.org/img/wn/${icon}@2x.png)`;\r\n    const today = new Date(dt*1000);\r\n    const weeks = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const day = weeks[today.getDay()].substring(0,3);\r\n    return (\r\n        <div className={`daily-weather ${active ? 'active' : ''}`} onClick={handleClick}>\r\n            <div className={\"day\"}>{day}</div>\r\n            {icon ? <div className={\"image\"} style={{backgroundImage:iconURL}}/> : null}\r\n            <div className={\"degrees\"}>\r\n                <span className={\"max\"}>{max}°</span>\r\n                <span>{min}°</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Weather;","import React, {useState, useEffect, useRef} from 'react';\nimport Weather from \"../weather/weather\";\nimport {Link, Route, Switch, useHistory} from 'react-router-dom';\nimport Script from 'react-load-script';\nimport './App.scss';\n\n/**\n * @desc A top level app component for the weather app.\n */\nfunction App() {\n  // CONSTANTS ---------------------------------------------------------------------------------------------------------\n\n  const API_KEY = \"AIzaSyAuthaYK4K1L1pOCEDjPbKVlnL99KxvfmI\";\n  const script_url = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places`;\n  const history = useHistory();\n\n  // COMPONENT STATE ---------------------------------------------------------------------------------------------------\n\n  const [isGoogleReady, setIsGoogleReady] = useState(false);\n  const [isD3Ready, setIsD3Ready] = useState(false);\n  const [isFocus, setIsFocus] = useState(false);\n  const [address, setAddress] = useState(null);\n  const [inputVal, setInputVal] = useState('');\n  const inputRef = useRef(null);\n\n  const props = {\n    isGoogleReady,\n    isD3Ready,\n    address,\n    inputVal,\n    setInputVal\n  };\n\n  const handleOnKeyUp = e => {\n    if (e.keyCode === 13) {\n      setAddress(inputVal);\n      history.push('/search');\n    }\n  };\n  return (\n        <div className=\"App\">\n          <Script url={script_url} onLoad={() => setIsGoogleReady(true)}/>\n          <Script url=\"https://d3js.org/d3.v4.min.js\" onLoad={() => setIsD3Ready(true)}/>\n          <div className={\"search\"}>\n            <div className={`search-container ${isFocus ? 'focus' : ''}`}>\n              <input type={\"text\"}\n                     ref={inputRef}\n                     value={inputVal}\n                     spellCheck={false}\n                     onChange={e => setInputVal(e.target.value)}\n                     onKeyUp={handleOnKeyUp}\n                     onFocus={() => setIsFocus(true)}\n                     onBlur={() => setIsFocus(false)}/>\n            </div>\n            <Link to={'/search'}>\n              <button onClick={() => {setAddress(inputVal)}}>Search</button>\n            </Link>\n          </div>\n            <Switch>\n              <Route path={\"/current\"}>\n                <Weather isSearchMode={false} {...props}/>\n              </Route>\n              <Route path={\"/search\"}>\n                <Weather isSearchMode={true} {...props}/>\n              </Route>\n            </Switch>\n        </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport './index.css';\nimport App from './app/App';\n\nReactDOM.render(\n  <React.StrictMode>\n      <Router>\n          <App/>\n      </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}