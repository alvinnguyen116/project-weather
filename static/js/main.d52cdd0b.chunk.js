(this["webpackJsonpproject-weather"]=this["webpackJsonpproject-weather"]||[]).push([[0],{21:function(e,t,a){e.exports=a(35)},26:function(e,t,a){},28:function(e,t,a){},31:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),l=a.n(r),i=a(9),o=(a(26),a(3)),s=a(11),u=a.n(s),m=a(18);function d(e){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var E=Object.freeze({FAHRENHEIT:"imperial",CELSIUS:"metric",KELVIN:"kelvin"});a(28);function h(e){var t,a=e.temp,n=e.weather,r=e.dt,l=e.active,i=e.handleClick,o=a.min,s=a.max;o=Math.round(o),s=Math.round(s),n&&n.length&&(t=n[0].icon);var u="url(http://openweathermap.org/img/wn/".concat(t,"@2x.png)"),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*r).getDay()].substring(0,3);return c.a.createElement("div",{className:"daily-weather ".concat(l?"active":""),onClick:i},c.a.createElement("div",{className:"day"},m),t?c.a.createElement("div",{className:"image",style:{backgroundImage:u}}):null,c.a.createElement("div",{className:"degrees"},c.a.createElement("span",{className:"max"},s,"\xb0"),c.a.createElement("span",null,o,"\xb0")))}function v(e){var t=e.dt,a=new Date(1e3*t).getHours();return c.a.createElement("div",{className:"time-label"},a%12===0?12:a%12," ",a>11?"PM":"AM")}var f=function(e){var t=e.isGoogleReady,a=e.isD3Ready,r=e.isSearchMode,l=e.address,i=e.setInputVal,s=e.inputVal,u=Object.freeze({TEMPERATURE:"0",PRECIPITATION:"1",WIND:"2"}),m=Object(n.useState)(),p=Object(o.a)(m,2),f=p[0],g=p[1],b=Object(n.useState)(E.FAHRENHEIT),y=Object(o.a)(b,2),j=y[0],N=y[1],O=Object(n.useState)(null),I=Object(o.a)(O,2),w=I[0],S=I[1],k=Object(n.useState)(0),T=Object(o.a)(k,2),R=T[0],C=T[1],P=Object(n.useState)(u.TEMPERATURE),A=Object(o.a)(P,2),M=A[0],x=A[1],D=Object(n.useRef)(null);Object(n.useEffect)((function(){if(a&&w&&w.hourly&&w.hourly.length){var e=[];w.hourly.slice(0,24).forEach((function(t,a){t.dt;var n,c=t.temp,r=t.wind_speed,l=t.rain;switch(M){case u.TEMPERATURE:n=c;break;case u.PRECIPITATION:n=l?l["1h"]:0;break;case u.WIND:n=r}e.push({i:a,value:n})}));var t=d3.select(D.current).attr("width",618).attr("height",56);t.selectAll("g").remove();var n=t.append("g"),c=d3.scaleTime().rangeRound([0,618]).domain([0,23]),r=d3.extent(e.map((function(e){return e.value})));M===u.PRECIPITATION&&(r=[0,1]);var l=d3.scaleLinear().rangeRound([56,0]).domain(r),i=d3.line().x((function(e){return c(e.i)})).y((function(e){return Math.round(l(e.value))}));n.append("path").datum(e).attr("stroke","#ec6e4c").attr("stroke-width",2).attr("fill","none").attr("d",i)}}),[w,a,M]),Object(n.useEffect)((function(){f?function(e,t){var a=e.lat,n=e.lon,c="86ad87c076e4ca1d5d30d98e7ce72ced";return t===E.KELVIN?d("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(n,"&appid=").concat(c)):d("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(n,"&units=").concat(t,"&appid=").concat(c))}(f,j).then(S):S(null)}),[f,j]),Object(n.useEffect)((function(){r||navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;g({lat:a,lon:n}),i("".concat(a,",").concat(n))}))}),[r]),Object(n.useEffect)((function(){r&&t&&l?function(e){if(!t)return;var a=new google.maps.places.AutocompleteService,n=new google.maps.Geocoder;a.getQueryPredictions({input:e},function(e,t,a){if(a===google.maps.places.PlacesServiceStatus.OK)try{var c=t[0].description;n.geocode({address:c},(function(t){if(t&&t.length){var a=t[0].geometry.location;e({lat:a.lat(),lon:a.lng()}),i(c)}}))}catch(r){throw r}else console.error(a)}.bind(null,g))}(l):g(null)}),[l]);var H=Object(n.useMemo)((function(){return s.split(",").slice(-3).join(",")}),[w]);if(w){var L,F,K=w.current,U=w.daily,V=w.hourly,W=K.humidity,z=K.rain,G=K.dt,B=K.temp,J=K.wind_speed,_=K.weather;B=Math.round(B),_&&_.length&&(L=_[0].description,F=_[0].icon);var Q="url(http://openweathermap.org/img/wn/".concat(F,"@2x.png)"),Y=new Date(1e3*G),q=Y.getHours(),X="".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][Y.getDay()]," ").concat(q%12?q%12:12,":00 ").concat(q>11?"PM":"AM"),Z=c.a.createElement("span",null,"\xb0F"),$=c.a.createElement("span",null,"\xb0C");j===E.FAHRENHEIT?$=c.a.createElement("div",{className:"link",onClick:function(){return N(E.CELSIUS)}},$):Z=c.a.createElement("div",{className:"link",onClick:function(){return N(E.FAHRENHEIT)}},Z);var ee=U.map((function(e,t){return c.a.createElement(h,Object.assign({},e,{key:e.dt,active:R===t,handleClick:function(){return C(t)}}))})),te=V.slice(0,24).filter((function(e,t){return t%3===1})).map((function(e){var t=e.dt;return c.a.createElement(v,{key:t,dt:t})}));return c.a.createElement("div",{className:"weather"},c.a.createElement("div",{className:"current"},c.a.createElement("div",{className:"top"},c.a.createElement("div",{className:"title"},r?H:""),c.a.createElement("div",{className:"time"},X),L?c.a.createElement("div",{className:"description"},L):null),c.a.createElement("div",{className:"middle"},c.a.createElement("div",{className:"temp-container"},F?c.a.createElement("div",{className:"image",style:{backgroundImage:Q}}):null,c.a.createElement("div",{className:"temp"},B),c.a.createElement("div",{className:"temp-options"},Z," \xa0 | \xa0 ",$)),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"precipitation"},"Precipitation: ","".concat(z?z["1h"]:0,"%")),c.a.createElement("div",{className:"humidity"},"Humidity: ","".concat(W,"%")),c.a.createElement("div",{className:"wind"},"Wind: ","".concat(J," mph")),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{onClick:function(){return x(u.TEMPERATURE)}},"Temperature"),c.a.createElement("button",{onClick:function(){return x(u.PRECIPITATION)}},"Precipitation"),c.a.createElement("button",{onClick:function(){return x(u.WIND)}},"Wind")))),c.a.createElement("svg",{ref:D}),c.a.createElement("div",{className:"time-labels"},te),c.a.createElement("div",{className:"bottom"},ee)))}return null},g=a(6),b=a(12),y=a.n(b);a(31);var j=function(){var e="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAuthaYK4K1L1pOCEDjPbKVlnL99KxvfmI","&libraries=places"),t=Object(g.f)(),a=Object(n.useState)(!1),r=Object(o.a)(a,2),l=r[0],s=r[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),d=m[0],p=m[1],E=Object(n.useState)(!1),h=Object(o.a)(E,2),v=h[0],b=h[1],j=Object(n.useState)(null),N=Object(o.a)(j,2),O=N[0],I=N[1],w=Object(n.useState)(""),S=Object(o.a)(w,2),k=S[0],T=S[1],R=Object(n.useRef)(null),C={isGoogleReady:l,isD3Ready:d,address:O,inputVal:k,setInputVal:T};return c.a.createElement("div",{className:"App"},c.a.createElement(y.a,{url:e,onLoad:function(){return s(!0)}}),c.a.createElement(y.a,{url:"https://d3js.org/d3.v4.min.js",onLoad:function(){return p(!0)}}),c.a.createElement("div",{className:"search"},c.a.createElement("div",{className:"search-container ".concat(v?"focus":"")},c.a.createElement("input",{type:"text",ref:R,value:k,spellCheck:!1,onChange:function(e){return T(e.target.value)},onKeyUp:function(e){13===e.keyCode&&(I(k),t.push("/search"))},onFocus:function(){return b(!0)},onBlur:function(){return b(!1)}})),c.a.createElement(i.b,{to:"/search"},c.a.createElement("button",{onClick:function(){I(k)}},"Search"))),c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/current"},c.a.createElement(f,Object.assign({isSearchMode:!1},C))),c.a.createElement(g.a,{path:"/search"},c.a.createElement(f,Object.assign({isSearchMode:!0},C)))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,null,c.a.createElement(j,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.d52cdd0b.chunk.js.map